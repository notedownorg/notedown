# VHS tape for testing wikilink navigation functionality
# Tests go-to-definition for wikilinks

Output "{{.OutputFile}}"
Output "{{.TmpDir}}/wikilink-navigation.gif"
Set FontSize 14  
Set Width 120
Set Height 120
Set TypingSpeed 50ms

# Hide the shell navigation and setup
Hide

# Change to test workspace
Type "cd {{.WorkspaceDir}}"
Enter
Sleep 500ms

# Start Neovim with VHS test configuration
Type "nvim --noplugin -u '{{.ConfigFile}}' index.md"
Enter
Sleep 3s

# Show recording once Neovim is loaded
Show

# Navigate to the wikilink - find the line with the wikilink
Type "gg"
Type "/target"  
Enter
Sleep 1s

# Position cursor on the wikilink
Type "F["
Type "ll"
Sleep 1s

# Trigger go-to-definition
Type "gd"
Sleep 2s

# Verify we're now in target.md by checking the filename
Type ":echo expand('%:t')"
Enter
Sleep 1s

# Go back to original file
Type ":e index.md"
Enter 
Sleep 1s

# Show we're back in the original file
Type ":echo 'Navigation test complete'"
Enter
Sleep 1s

# Hide before exiting
Hide

# Exit Neovim
Type ":qa!"
Enter
Sleep 500ms

# Return to root directory
Type "cd {{.TmpDir}}"
Enter